{"version":3,"file":"devicecontext.js","sourceRoot":"","sources":["../../../src/js/integrations/devicecontext.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,uBAAuB,EAAE,aAAa,EAAE,MAAM,cAAc,CAAC;AAEtE,OAAO,EAAE,aAAa,EAAE,MAAM,cAAc,CAAC;AAE7C,MAAM,EAAE,QAAQ,EAAE,GAAG,aAAa,CAAC;AAEnC,uCAAuC;AACvC,MAAM,OAAO,aAAa;IAA1B;QACE;;WAEG;QACI,SAAI,GAAW,aAAa,CAAC,EAAE,CAAC;IA2BzC,CAAC;IArBC;;OAEG;IACI,SAAS;QACd,uBAAuB,CAAC,CAAO,KAAY,EAAE,EAAE;YAC7C,MAAM,IAAI,GAAG,aAAa,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YAC3D,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,KAAK,CAAC;aACd;YAED,IAAI;gBACF,0CAA0C;gBAC1C,MAAM,cAAc,GAAG,MAAM,QAAQ,CAAC,cAAc,EAAE,CAAC;gBACvD,KAAK,CAAC,QAAQ,qBAAQ,cAAc,EAAK,KAAK,CAAC,QAAQ,CAAE,CAAC;aAC3D;YAAC,OAAO,GAAG,EAAE;gBACZ,yCAAyC;aAC1C;YAED,OAAO,KAAK,CAAC;QACf,CAAC,CAAA,CAAC,CAAC;IACL,CAAC;;AAzBD;;GAEG;AACW,gBAAE,GAAW,eAAe,CAAC","sourcesContent":["import { addGlobalEventProcessor, getCurrentHub } from \"@sentry/core\";\nimport { Event, Integration } from \"@sentry/types\";\nimport { NativeModules } from \"react-native\";\n\nconst { RNSentry } = NativeModules;\n\n/** Load device context from native. */\nexport class DeviceContext implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public name: string = DeviceContext.id;\n  /**\n   * @inheritDoc\n   */\n  public static id: string = \"DeviceContext\";\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(): void {\n    addGlobalEventProcessor(async (event: Event) => {\n      const self = getCurrentHub().getIntegration(DeviceContext);\n      if (!self) {\n        return event;\n      }\n\n      try {\n        // tslint:disable-next-line: no-unsafe-any\n        const deviceContexts = await RNSentry.deviceContexts();\n        event.contexts = { ...deviceContexts, ...event.contexts };\n      } catch (_Oo) {\n        // Something went wrong, we just continue\n      }\n\n      return event;\n    });\n  }\n}\n"]}